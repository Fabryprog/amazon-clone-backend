(this["webpackJsonpamazon-clone"]=this["webpackJsonpamazon-clone"]||[]).push([[0],{3:function(e){e.exports=JSON.parse('{"SERVER":"http://localhost:8080","API":"/api/v1","REST":{"LOGIN":"/login","PRODUCT_LIST":"/product","SHOPPING_CART":"/product/cart"}}')},42:function(e,t,a){e.exports=a(82)},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},71:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(19),l=a.n(c),r=(a(47),a(48),a(12)),s=a(13),i=a(15),u=a(14),m=(a(49),a(50),a(3)),d=a(6),p=a.n(d),h=a(18),E=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={products:[]},n}return Object(s.a)(a,[{key:"addToBasket",value:function(e){p.a.post(m.SERVER+m.API+m.REST.SHOPPING_CART,{code:e},{headers:{Authorization:localStorage.getItem("AUTH_TOKEN")}}).then((function(e){console.log(e),h.a.success("Article added to basket!")})).catch((function(e){console.log(e),403==e.response.status&&window.location.reload("/login")}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"product"},o.a.createElement("div",{className:"product__info"},o.a.createElement("p",null,this.props.title),o.a.createElement("p",{className:"product__price"},o.a.createElement("small",null,"$"),o.a.createElement("strong",null,this.props.price)),o.a.createElement("div",{className:"product__rating"},Array(this.props.rating).fill().map((function(e){return o.a.createElement("i",{key:"{index}",class:"fa fa-star"})})))),o.a.createElement("img",{src:this.props.image,alt:""}),o.a.createElement("button",{onClick:function(){return e.addToBasket(e.props.code)}},"Add to basket"))}}]),a}(o.a.Component),g=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={products:[]},p.a.get(m.SERVER+m.API+m.REST.PRODUCT_LIST).then((function(e){console.log(e),n.setState({products:e.data})})).catch((function(e){console.log(e)})),n}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"home"},o.a.createElement("img",{className:"home__image",src:"https://images-eu.ssl-images-amazon.com/images/G/02/digital/video/merch2016/Hero/Covid19/Generic/GWBleedingHero_ENG_COVIDUPDATE__XSite_1500x600_PV_en-GB._CB428684220_.jpg",alt:""}),o.a.createElement("div",{className:"home__row"},this.state.products.map((function(e){return o.a.createElement(E,{code:e.code,title:e.title,image:e.image,price:e.price,rating:e.rating})}))))}}]),a}(o.a.Component),_=a(17),f=a(4),v=(a(71),a(38)),b=a.n(v),k=a(39),N=a.n(k);var O=function(){var e=Object(f.f)(),t=localStorage.getItem("CURRENT_USERNAME");return o.a.createElement("nav",{className:"header"},o.a.createElement(_.b,{to:"/"},o.a.createElement("img",{className:"header__logo",src:"http://pngimg.com/uploads/amazon/amazon_PNG11.png",alt:"amazon logo"})),o.a.createElement("div",{className:"header__search"},o.a.createElement("input",{type:"text",className:"header__searchInput"}),o.a.createElement(b.a,{className:"header__searchIcon"})),o.a.createElement("div",{className:"header__nav"},o.a.createElement(_.b,{to:"/login",className:"header__link"},o.a.createElement("div",{onClick:function(){t&&e.push("/login")},className:"header__option"},o.a.createElement("span",{className:"header__optionLineOne"},"Hello ",t),o.a.createElement("span",{className:"header__optionLineTwo"},t?"Sign Out":"Sign In")))),o.a.createElement(_.b,{to:"/checkout",className:"header__link"},o.a.createElement("div",{className:"header__optionBasket"},o.a.createElement(N.a,null))))},S=(a(76),a(77),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).removeFromBasket=function(e){p.a.post(m.SERVER+m.API+m.REST.SHOPPING_CART+"/"+e,{},{headers:{Authorization:localStorage.getItem("AUTH_TOKEN")}}).then((function(e){console.log(e),window.location.reload("/")})).catch((function(e){console.log(e)}))},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"checkoutProduct"},o.a.createElement("img",{src:this.props.image,alt:""}),o.a.createElement("div",{className:"checkoutProduct__info"},o.a.createElement("p",{className:"checkoutProduct__title"},this.props.title),o.a.createElement("p",{className:"checkoutProduct__price"},o.a.createElement("small",null,"$"),o.a.createElement("strong",null,this.props.price)),o.a.createElement("div",{className:"checkoutProduct__rating"},Array(this.props.rating).fill().map((function(e){return o.a.createElement("i",{key:"{index}",class:"fa fa-star"})}))),o.a.createElement("button",{onClick:function(){return e.removeFromBasket(e.props.code)}},"Remove from basket")))}}]),a}(o.a.Component)),T=a(40),R=a.n(T),A=(a(79),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={basket:[]},p.a.get(m.SERVER+m.API+m.REST.SHOPPING_CART,{headers:{Authorization:localStorage.getItem("AUTH_TOKEN")}}).then((function(e){var t;console.log(e),n.setState({basket:e.data,total:null===(t=e.data)||void 0===t?void 0:t.reduce((function(e,t){return t.price+e}),0)})})).catch((function(e){console.log(e)})),n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"subtotal"},o.a.createElement(R.a,{renderText:function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"( Subtotal ",e.state.basket.length," items ) : ",o.a.createElement("strong",null,"".concat(t))),o.a.createElement("small",{className:"subtotal__gift"},o.a.createElement("input",{type:"checkbox"})," This order contains"))},value:this.state.total,displayType:"text",thousandSeparator:!0,prefix:"$"}),o.a.createElement("button",null,"Proceed to checkout"))}}]),a}(o.a.Component)),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={basket:[]},p.a.get(m.SERVER+m.API+m.REST.SHOPPING_CART,{headers:{Authorization:localStorage.getItem("AUTH_TOKEN")}}).then((function(e){console.log(e),n.setState({basket:e.data})})).catch((function(e){console.log(e)})),n}return Object(s.a)(a,[{key:"render",value:function(){var e,t;return o.a.createElement("div",{className:"checkout"},o.a.createElement("div",{className:"checkout__left"},o.a.createElement("img",{className:"checkout__ad",src:"https://images-na.ssl-images-amazon.com/images/G/01/AmazonExports/Fuji/2020/May/Hero/Fuji_TallHero_45M_v2_1x._CB432458380_.jpg",alt:"ad"}),0===(null===(e=this.state.basket)||void 0===e?void 0:e.length)?o.a.createElement("div",null,o.a.createElement("h2",null,"Your shopping basket is empty"),o.a.createElement("p",null,"You have no items in your basket. To buy one or add item to basket click the add to basket button")):o.a.createElement("div",null,o.a.createElement("h2",{className:"checkout__title"},"Your shopping basket"),this.state.basket.map((function(e){return console.log("BASKET"),console.log(e),o.a.createElement(S,{code:e.code,title:e.title,image:e.image,price:e.price,rating:e.rating})})))),(null===(t=this.state.basket)||void 0===t?void 0:t.length)>0&&o.a.createElement("div",{className:"checkout__right"},o.a.createElement(A,null)))}}]),a}(o.a.Component),I=a(26);a(80);var P=function(){var e=Object(f.f)(),t=Object(n.useState)(""),a=Object(I.a)(t,2),c=a[0],l=a[1],r=Object(n.useState)(""),s=Object(I.a)(r,2),i=s[0],u=s[1];return localStorage.setItem("AUTH_TOKEN",null),o.a.createElement("div",{className:"login"},o.a.createElement(_.b,{to:"/"},o.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/1024px-Amazon_logo.svg.png",alt:"",className:"login__logo"})),o.a.createElement("div",{className:"login__container"},o.a.createElement("h1",null,"Sign in"),o.a.createElement("form",null,o.a.createElement("h5",null,"Email:"),o.a.createElement("input",{value:c,onChange:function(e){return l(e.target.value)},type:"email"}),o.a.createElement("h5",null,"Password:"),o.a.createElement("input",{value:i,onChange:function(e){return u(e.target.value)},type:"password"}),o.a.createElement("button",{type:"submit",onClick:function(t){t.preventDefault(),p.a.post(m.SERVER+m.REST.LOGIN,JSON.stringify({username:c,password:i})).then((function(t){console.log(p.a.defaults.headers),200==t.status&&(localStorage.setItem("AUTH_TOKEN",t.headers["x-token"]),localStorage.setItem("CURRENT_USERNAME",c)),e.push("/")})).catch((function(e){console.log(e),h.a.error("Login Failure!")}))},className:"login__signInBtn"},"sign in"),o.a.createElement("p",null,"by signing in you agree to amazon condition of use and sale.Please see our privacy notice, our cookies notice and our interest based ad notice."))))};var y=function(){return p.a.defaults.headers.post["Content-Type"]="application/json",o.a.createElement(_.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(f.c,null,o.a.createElement(f.a,{path:"/login"},o.a.createElement(P,null)),o.a.createElement(f.a,{path:"/checkout"},o.a.createElement(O,null),o.a.createElement(j,null)),o.a.createElement(f.a,{path:"/"},o.a.createElement(O,null),o.a.createElement(g,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.e2a3d057.chunk.js.map